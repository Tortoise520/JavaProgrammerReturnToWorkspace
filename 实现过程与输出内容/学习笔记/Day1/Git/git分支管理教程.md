# git分支管理教程
Git分支是版本控制的核心功能，它允许你在主线之外进行独立的开发工作，而不会影响主线的稳定性。下面这个表格概括了Git分支管理的主要方面，帮助你快速建立整体认知：

| 管理维度 | 核心概念/操作 | 关键命令/备注 |
| :--- | :--- | :--- |
| **核心概念** | 分支是指向提交的可变指针 | 默认主分支为 `main` 或 `master` |
| **基础操作** | 创建与切换 | `git checkout -b <分支名>` |
| | 查看分支 | `git branch` (本地), `git branch -a` (所有) |
| | 合并分支 | `git merge <源分支>` |
| | 删除分支 | `git branch -d` (已合并), `git branch -D` (强制) |
| **工作流程** | GitHub Flow | 简化流程，适用于敏捷开发 |
| | GitFlow | 全流程管理，适用于大型项目 |
| **团队协作** | 推送分支 | `git push -u origin <分支名>` (首次) |
| | 拉取分支 | `git fetch origin` + `git checkout -b <本地分支> origin/<远程分支>` |
| | 删除远程分支 | `git push origin --delete <分支名>` |
| **进阶操作** | 变基(Rebase) | 整理提交历史，创造更线性的历史 |
| | 挑选(Cherry-pick) | 选择性应用特定提交 |

### 🔍 详解基础操作与团队协作

掌握了整体框架后，我们来看看其中一些关键操作在实战中如何运用。

**1. 分支的创建、切换与推送**
- **创建并切换分支**：使用 `git checkout -b feature/login-page` 可以一步完成创建和切换。这是最常用的方式。
- **推送分支到远程**：首次推送本地分支到远程仓库时，需要使用 `git push -u origin feature/login-page` 命令。这里的 `-u` 参数（等同于 `--set-upstream`）非常关键，它会建立本地分支与远程分支的跟踪关系。设置之后，后续在该分支上进行 `git push` 或 `git pull` 就可以简化命令，无需再指定远程仓库和分支。

**2. 分支的合并与冲突解决**
- **合并分支**：通常你会切换到目标分支（如 `main`），然后执行 `git merge feature/login-page` 将特性分支合并进来。
- **解决冲突**：当两个分支对同一文件的同一部分进行了不同修改，合并时会发生冲突。Git会提示你哪些文件有冲突，你需要手动编辑这些文件，保留所需的内容，并删除Git标记的冲突符号（`<<<<<<<`, `=======`, `>>>>>>>`）。解决后，使用 `git add` 标记已解决冲突的文件，然后提交即可。

**3. 分支的查看与删除**
- **查看分支**：`git branch` 查看本地分支，当前分支前面有 `*` 标记。`git branch -a` 可以查看所有本地和远程分支。
- **删除分支**：合并完成的功能分支应及时清理。使用 `git branch -d feature/login-page` 删除已合并的本地分支。使用 `git push origin --delete feature/login-page` 可以删除远程分支。

### 🚀 选择合适的工作流程

为了在团队中高效地使用分支，形成一套约定俗成的工作流程很重要。以下是两种主流模式：

- **GitHub Flow**：适用于追求敏捷和快速迭代的团队。
    - 核心思想是主分支 `main` 始终保持可部署状态。
    - 任何新功能都从 `main` 分支拉取一个新的功能分支（如 `feature/*`）进行开发。
    - 开发完成后，通过创建 **Pull Request (PR)** 发起代码审查，讨论通过后合并回 `main` 分支，并可以立即部署。

- **GitFlow**：适用于发布周期固定或需要维护多个版本的大型项目。
    - 它定义了严格的分支模型，除了主分支（`main`）外，还有一个常设的开发主分支（`develop`）。
    - 功能分支（`feature/*`）从 `develop` 分支创建，并合并回 `develop`。
    - 发布时，从 `develop` 拉取发布分支（`release/*`）进行测试和小修，最后合并到 `main` 和 `develop`。
    - 生产环境的紧急修复则从 `main` 拉取热修复分支（`hotfix/*`），修复后同时合并回 `main` 和 `develop`。

### 👥 团队协作最佳实践

在团队开发中，遵循一些最佳实践能让协作更顺畅：

- **清晰的命名规范**：使用如 `feature/`、`fix/`、`hotfix/` 等前缀命名分支，能清晰表明分支目的。例如，`feature/user-auth`、`fix/payment-issue`。
- **功能分支独立**：**避免直接在主分支上开发**。每个新功能或Bug修复都应在独立的分支上进行，这有助于隔离变化和代码审查。
- **保持分支短暂**：功能分支完成并合并后，应及时删除，避免仓库中堆积大量过时分支。
- **善用Pull Request**：通过PR进行代码审查是保证代码质量、分享知识和统一代码风格的有效手段。

### 💎 进阶技巧与原则

- **Rebase：整理提交历史**
    `git rebase` 命令可以将一个分支上的修改在另一个分支的最新提交基础上重新“播放”，从而形成一条线性的提交历史。
    - **与Merge的区别**：`merge` 会创建一个新的合并提交，保留分支的拓扑结构；而 `rebase` 会重写提交历史，使其成为一条直线。
    - **黄金法则**：**只对尚未推送到远程仓库的本地提交执行rebase**。不要rebase那些已经推送到公共仓库的提交，因为这会对其他基于你原有提交工作的协作者造成困扰。

- **主分支保护原则**
    主分支（如`main`）应始终保持**稳定且可部署**的状态。通过设置分支保护规则，可以禁止直接向主分支推送代码，强制所有变更都必须通过Pull Request并经过审查后才能合并。

Git分支管理是一门实践性很强的技能，多在实际项目中练习和体验不同工作流，你会越来越得心应手。希望这篇教程能为你打下坚实的基础！如果你对某个特定场景有更深入的问题，我很乐意进一步讨论。